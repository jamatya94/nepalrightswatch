<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Artistic Sketches - Nepal Gen Z Protests Memorial</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <span class="flag-emoji">ðŸ‡³ðŸ‡µ</span>
                <span class="logo-text">Nepal's Democratic Revolution</span>
            </div>
            
            <!-- Mobile menu toggle -->
            <div class="nav-toggle" id="navToggle">
                <span></span>
                <span></span>
                <span></span>
            </div>
            
            <div class="nav-menu" id="navMenu">
                <a href="index.html" class="nav-link">Home</a>
                <a href="index.html#about" class="nav-link">About</a>
                <a href="get-justice.html" class="nav-link">Get Justice</a>
                <a href="sketches.html" class="nav-link active">Sketches</a>
                <a href="stencils.html" class="nav-link">Stencils</a>
                <a href="media.html" class="nav-link">Media</a>
                <a href="latest-updates.html" class="nav-link">Latest Updates</a>
                <a href="victim-form.html" class="nav-link">Victim Information Form</a>
                <a href="contact.html" class="nav-link">Contact</a>
            </div>
        </div>
    </nav>

    <!-- Sketches Gallery Section -->
    <section id="sketches" class="gallery-section">
        <div class="container">
            <h2 class="section-title">Artistic Sketches</h2>
            <p class="section-subtitle">Hand-drawn sketches and artistic designs honoring our martyrs</p>
            <div class="loading-indicator" id="sketches-loading">
                <div class="loading-spinner"></div>
                <p>Loading sketches...</p>
            </div>
            <div id="sketches-grid" class="gallery-grid" style="display: none;">
                <!-- Sketches will be loaded dynamically -->
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>ðŸ‡³ðŸ‡µ Nepal's Democratic Revolution</h3>
                    <p>Honoring the brave hearts who stood for justice and democracy.</p>
                </div>
                <div class="footer-section">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="index.html#about">About</a></li>
                        <li><a href="get-justice.html">Get Justice</a></li>
                        <li><a href="victim-form.html">Victim Information Form</a></li>
                        <li><a href="contact.html">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Follow Us</h4>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-facebook"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Nepal's Democratic Revolution. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Image Modal -->
    <div id="imageModal" class="image-modal">
        <div class="modal-content">
            <span class="modal-close">&times;</span>
            <img id="modalImage" class="modal-image" src="" alt="">
            <div class="modal-info">
                <h3 id="modalTitle" class="modal-title"></h3>
                <p id="modalMartyr" class="modal-martyr"></p>
                <p id="modalDescription" class="modal-description"></p>
                
                <div class="modal-details">
                    <div class="detail-row">
                        <span class="detail-label">Age:</span>
                        <span id="modalAge" class="detail-value"></span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Occupation:</span>
                        <span id="modalOccupation" class="detail-value"></span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Location:</span>
                        <span id="modalLocation" class="detail-value"></span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Role:</span>
                        <span id="modalRole" class="detail-value"></span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">How they became a Martyr:</span>
                        <span id="modalMartyrStory" class="detail-value"></span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Short Biography:</span>
                        <span id="modalBiography" class="detail-value"></span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        // Load sketches when page loads
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM loaded, attempting to load sketches...');
            
            // Always use manual loading for now to ensure it works
            console.log('Using manual loading to ensure visibility...');
            loadSketchesManually();
        });
        
        // Load sketches with real S3 images
        function loadSketchesManually() {
            console.log('Loading sketches with S3 images...');
            const sketchesGrid = document.getElementById('sketches-grid');
            const loadingIndicator = document.getElementById('sketches-loading');
            
            if (!sketchesGrid) {
                console.error('sketches-grid element not found!');
                return;
            }
            
            // Hide loading indicator
            if (loadingIndicator) {
                loadingIndicator.style.display = 'none';
            }
            
            // Show the grid
            sketchesGrid.style.display = 'grid';
            sketchesGrid.style.visibility = 'visible';
            sketchesGrid.style.opacity = '1';
            
            // Use the real sketches data from script.js
            if (typeof sketchesData !== 'undefined') {
                console.log('Found sketchesData, loading', sketchesData.length, 'sketches');
                
                sketchesData.forEach((sketch, index) => {
                    const sketchCard = document.createElement('div');
                    sketchCard.className = 'gallery-card sketch-card';
                    sketchCard.style.cssText = 'display: block; visibility: visible; opacity: 1; background: white; border-radius: 16px; overflow: hidden; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); margin-bottom: 20px;';
                    
                    // Create image container
                    const imageContainer = document.createElement('div');
                    imageContainer.style.cssText = 'width: 100%; height: 200px; position: relative; background: #f8f9fa; display: flex; align-items: center; justify-content: center;';
                    
                    // Create actual image element
                    const img = document.createElement('img');
                    img.src = sketch.image;
                    img.alt = sketch.name;
                    img.style.cssText = 'width: 100%; height: 100%; object-fit: cover;';
                    
                    // Create loading placeholder
                    const placeholder = document.createElement('div');
                    placeholder.style.cssText = 'position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(135deg, #1e40af, #3b82f6); display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; font-size: 16px;';
                    placeholder.textContent = sketch.name;
                    
                    // Handle image loading
                    img.onload = function() {
                        console.log('S3 image loaded successfully:', sketch.image);
                        placeholder.style.display = 'none';
                    };
                    
                    img.onerror = function() {
                        console.error('Failed to load S3 image:', sketch.image);
                        // Try fallback image if available
                        if (sketch.fallbackImage) {
                            img.src = sketch.fallbackImage;
                            img.onerror = function() {
                                placeholder.style.display = 'flex';
                                placeholder.innerHTML = `${sketch.name}<br><small style="font-size: 12px;">Image unavailable</small>`;
                            };
                        } else {
                            placeholder.style.display = 'flex';
                            placeholder.innerHTML = `${sketch.name}<br><small style="font-size: 12px;">Image unavailable</small>`;
                        }
                    };
                    
                    imageContainer.appendChild(img);
                    imageContainer.appendChild(placeholder);
                    
                    // Create info section
                    const infoDiv = document.createElement('div');
                    infoDiv.style.cssText = 'padding: 15px; background: white;';
                    infoDiv.innerHTML = `
                        <h3 style="margin: 0 0 8px 0; font-size: 16px; font-weight: bold; color: #333;">${sketch.name}</h3>
                        <p style="margin: 0; font-size: 14px; color: #666;">${sketch.description}</p>
                    `;
                    
                    // Append everything
                    sketchCard.appendChild(imageContainer);
                    sketchCard.appendChild(infoDiv);
                    sketchesGrid.appendChild(sketchCard);
                    
                    // Add click event to show image modal
                    sketchCard.addEventListener('click', function() {
                        console.log('Sketch clicked:', sketch.name);
                        showImageModal(sketch);
                    });
                });
            } else {
                console.error('sketchesData not found in script.js');
            }
            
            console.log('Sketches loading completed');
        }
        
        // Function to show image modal
        function showImageModal(sketch) {
            const modal = document.getElementById('imageModal');
            const modalImage = document.getElementById('modalImage');
            const modalTitle = document.getElementById('modalTitle');
            const modalMartyr = document.getElementById('modalMartyr');
            const modalDescription = document.getElementById('modalDescription');
            const modalAge = document.getElementById('modalAge');
            const modalOccupation = document.getElementById('modalOccupation');
            const modalLocation = document.getElementById('modalLocation');
            const modalRole = document.getElementById('modalRole');
            const modalMartyrStory = document.getElementById('modalMartyrStory');
            const modalBiography = document.getElementById('modalBiography');
            
            if (modal && modalImage && modalTitle && modalMartyr && modalDescription) {
                // Set the image source (use fallback if main image fails)
                modalImage.src = sketch.image;
                modalImage.onerror = function() {
                    if (sketch.fallbackImage) {
                        modalImage.src = sketch.fallbackImage;
                    }
                };
                
                // Set the text content
                modalTitle.textContent = sketch.name;
                modalMartyr.textContent = sketch.martyr ? `In memory of: ${sketch.martyr}` : '';
                modalDescription.textContent = sketch.description;
                
                // Set the new detail fields
                if (modalAge) modalAge.textContent = sketch.age || '--';
                if (modalOccupation) modalOccupation.textContent = sketch.occupation || '--';
                if (modalLocation) modalLocation.textContent = sketch.location || '--';
                if (modalRole) modalRole.textContent = sketch.role || '--';
                if (modalMartyrStory) modalMartyrStory.textContent = sketch.martyrStory || '--';
                if (modalBiography) modalBiography.textContent = sketch.biography || '--';
                
                // Show the modal
                modal.style.display = 'flex';
            }
        }
        
        // Close modal functionality
        document.addEventListener('DOMContentLoaded', function() {
            const modal = document.getElementById('imageModal');
            const closeBtn = document.querySelector('.modal-close');
            
            if (closeBtn) {
                closeBtn.addEventListener('click', function() {
                    modal.style.display = 'none';
                });
            }
            
            if (modal) {
                modal.addEventListener('click', function(e) {
                    if (e.target === modal) {
                        modal.style.display = 'none';
                    }
                });
            }
        });
    </script>
</body>
</html>
