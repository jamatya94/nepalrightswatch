<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stencil Artwork - Nepal Gen Z Protests Memorial</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <span class="flag-emoji">ðŸ‡³ðŸ‡µ</span>
                <span class="logo-text">Nepal's Democratic Revolution</span>
            </div>
            
            <!-- Mobile menu toggle -->
            <div class="nav-toggle" id="navToggle">
                <span></span>
                <span></span>
                <span></span>
            </div>
            
            <div class="nav-menu" id="navMenu">
                <a href="index.html" class="nav-link">Home</a>
                <a href="index.html#about" class="nav-link">About</a>
                <a href="get-justice.html" class="nav-link">Get Justice</a>
                <a href="sketches.html" class="nav-link">Sketches</a>
                <a href="stencils.html" class="nav-link active">Stencils</a>
                <a href="media.html" class="nav-link">Media</a>
                <a href="latest-updates.html" class="nav-link">Latest Updates</a>
                <a href="victim-form.html" class="nav-link">Victim Information Form</a>
                <a href="contact.html" class="nav-link">Contact</a>
            </div>
        </div>
    </nav>

    <!-- Stencils Gallery Section -->
    <section id="stencils" class="gallery-section">
        <div class="container">
            <h2 class="section-title">Stencil Artwork</h2>
            <p class="section-subtitle">Stencil designs and artwork created in memory of our fallen heroes</p>
            <div class="loading-indicator" id="stencils-loading">
                <div class="loading-spinner"></div>
                <p>Loading stencils...</p>
            </div>
            <div id="stencils-grid" class="gallery-grid" style="display: none;">
                <!-- Stencils will be loaded dynamically -->
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>ðŸ‡³ðŸ‡µ Nepal's Democratic Revolution</h3>
                    <p>Honoring the brave hearts who stood for justice and democracy.</p>
                </div>
                <div class="footer-section">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="index.html#about">About</a></li>
                        <li><a href="get-justice.html">Get Justice</a></li>
                        <li><a href="victim-form.html">Victim Information Form</a></li>
                        <li><a href="contact.html">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Follow Us</h4>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-facebook"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Nepal's Democratic Revolution. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Image Modal -->
    <div id="imageModal" class="image-modal">
        <div class="modal-content">
            <span class="modal-close">&times;</span>
            <img id="modalImage" class="modal-image" src="" alt="">
            <div class="modal-info">
                <h3 id="modalTitle" class="modal-title"></h3>
                <p id="modalMartyr" class="modal-martyr"></p>
                <p id="modalDescription" class="modal-description"></p>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        // Load stencils when page loads
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM loaded, attempting to load stencils...');
            
            // Always use manual loading for now to ensure it works
            console.log('Using manual loading to ensure visibility...');
            loadStencilsManually();
        });
        
        // Load stencils with real S3 images
        function loadStencilsManually() {
            console.log('Loading stencils with S3 images...');
            const stencilsGrid = document.getElementById('stencils-grid');
            const loadingIndicator = document.getElementById('stencils-loading');
            
            if (!stencilsGrid) {
                console.error('stencils-grid element not found!');
                return;
            }
            
            // Hide loading indicator
            if (loadingIndicator) {
                loadingIndicator.style.display = 'none';
            }
            
            // Show the grid
            stencilsGrid.style.display = 'grid';
            stencilsGrid.style.visibility = 'visible';
            stencilsGrid.style.opacity = '1';
            
            // Use the real stencils data from script.js
            if (typeof stencilsData !== 'undefined') {
                console.log('Found stencilsData, loading', stencilsData.length, 'stencils');
                
                stencilsData.forEach((stencil, index) => {
                    const stencilCard = document.createElement('div');
                    stencilCard.className = 'gallery-card stencil-card';
                    stencilCard.style.cssText = 'display: block; visibility: visible; opacity: 1; background: white; border-radius: 16px; overflow: hidden; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); margin-bottom: 20px;';
                    
                    // Create image container
                    const imageContainer = document.createElement('div');
                    imageContainer.style.cssText = 'width: 100%; height: 200px; position: relative; background: #f8f9fa; display: flex; align-items: center; justify-content: center;';
                    
                    // Create actual image element
                    const img = document.createElement('img');
                    img.src = stencil.image;
                    img.alt = stencil.name;
                    img.style.cssText = 'width: 100%; height: 100%; object-fit: cover;';
                    
                    // Create loading placeholder
                    const placeholder = document.createElement('div');
                    placeholder.style.cssText = 'position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(135deg, #dc2626, #ef4444); display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; font-size: 16px;';
                    placeholder.textContent = stencil.martyr || stencil.name;
                    
                    // Handle image loading
                    img.onload = function() {
                        console.log('S3 image loaded successfully:', stencil.image);
                        placeholder.style.display = 'none';
                    };
                    
                    img.onerror = function() {
                        console.error('Failed to load S3 image:', stencil.image);
                        // Try fallback image if available
                        if (stencil.fallbackImage) {
                            img.src = stencil.fallbackImage;
                            img.onerror = function() {
                                placeholder.style.display = 'flex';
                                placeholder.innerHTML = `${stencil.martyr || stencil.name}<br><small style="font-size: 12px;">Image unavailable</small>`;
                            };
                        } else {
                            placeholder.style.display = 'flex';
                            placeholder.innerHTML = `${stencil.martyr || stencil.name}<br><small style="font-size: 12px;">Image unavailable</small>`;
                        }
                    };
                    
                    imageContainer.appendChild(img);
                    imageContainer.appendChild(placeholder);
                    
                    // Create info section
                    const infoDiv = document.createElement('div');
                    infoDiv.style.cssText = 'padding: 15px; background: white;';
                    infoDiv.innerHTML = `
                        <h3 style="margin: 0 0 8px 0; font-size: 16px; font-weight: bold; color: #333;">${stencil.name}</h3>
                        ${stencil.martyr ? `<p style="margin: 0 0 5px 0; font-size: 14px; color: #dc2626; font-weight: bold;">In memory of: ${stencil.martyr}</p>` : ''}
                        <p style="margin: 0; font-size: 14px; color: #666;">${stencil.description}</p>
                    `;
                    
                    // Append everything
                    stencilCard.appendChild(imageContainer);
                    stencilCard.appendChild(infoDiv);
                    stencilsGrid.appendChild(stencilCard);
                    
                    // Add click event
                    stencilCard.addEventListener('click', function() {
                        console.log('Stencil clicked:', stencil.name);
                        alert(`${stencil.name} stencil clicked!`);
                    });
                });
            } else {
                console.error('stencilsData not found in script.js');
            }
            
            console.log('Stencils loading completed');
        }
    </script>
</body>
</html>
